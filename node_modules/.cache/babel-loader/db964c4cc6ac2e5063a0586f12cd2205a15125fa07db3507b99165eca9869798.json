{"ast":null,"code":"// Language detection and preference management\n/**\n * Get user's preferred language based on priority:\n * 1. User's manual selection (from localStorage)\n * 2. Browser's language setting\n * 3. Default to English\n */export const detectUserLanguage=()=>{// Check if user has manually selected a language\nconst savedLanguage=localStorage.getItem('userLanguagePreference');if(savedLanguage==='en'||savedLanguage==='de'){return savedLanguage;}// Check browser language\nconst browserLanguage=navigator.language||navigator.userLanguage;// Check if browser language is German\nif(browserLanguage){const lang=browserLanguage.toLowerCase();// Check for German language codes (de, de-DE, de-AT, de-CH, etc.)\nif(lang.startsWith('de')){return'de';}}// Default to English\nreturn'en';};/**\n * Save user's language preference\n */export const saveLanguagePreference=language=>{localStorage.setItem('userLanguagePreference',language);// Also save in cookie for server-side detection (if needed)\ndocument.cookie=\"language=\".concat(language,\"; path=/; max-age=31536000\");// 1 year\n};/**\n * Clear language preference (for testing)\n */export const clearLanguagePreference=()=>{localStorage.removeItem('userLanguagePreference');document.cookie='language=; path=/; max-age=0';};/**\n * Get language from URL path\n */export const getLanguageFromPath=pathname=>{if(pathname.startsWith('/de')){return'de';}if(pathname==='/'||!pathname.startsWith('/de')){return'en';}return null;};/**\n * Check if user should be redirected to German version\n * This happens only on first visit (no saved preference)\n */export const shouldRedirectToGerman=currentPath=>{// Don't redirect if user already has a saved preference\nconst savedLanguage=localStorage.getItem('userLanguagePreference');if(savedLanguage){return false;}// Don't redirect if already on German page\nif(currentPath.startsWith('/de')){return false;}// Check if browser language is German\nconst browserLanguage=navigator.language||navigator.userLanguage;if(browserLanguage){const lang=browserLanguage.toLowerCase();return lang.startsWith('de');}return false;};","map":{"version":3,"names":["detectUserLanguage","savedLanguage","localStorage","getItem","browserLanguage","navigator","language","userLanguage","lang","toLowerCase","startsWith","saveLanguagePreference","setItem","document","cookie","concat","clearLanguagePreference","removeItem","getLanguageFromPath","pathname","shouldRedirectToGerman","currentPath"],"sources":["/Users/biltontaheri/Documents/Development/Fynteq/src/utils/languageDetection.ts"],"sourcesContent":["// Language detection and preference management\n\n/**\n * Get user's preferred language based on priority:\n * 1. User's manual selection (from localStorage)\n * 2. Browser's language setting\n * 3. Default to English\n */\nexport const detectUserLanguage = (): 'en' | 'de' => {\n  // Check if user has manually selected a language\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage === 'en' || savedLanguage === 'de') {\n    return savedLanguage;\n  }\n\n  // Check browser language\n  const browserLanguage = navigator.language || (navigator as any).userLanguage;\n  \n  // Check if browser language is German\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    // Check for German language codes (de, de-DE, de-AT, de-CH, etc.)\n    if (lang.startsWith('de')) {\n      return 'de';\n    }\n  }\n\n  // Default to English\n  return 'en';\n};\n\n/**\n * Save user's language preference\n */\nexport const saveLanguagePreference = (language: 'en' | 'de'): void => {\n  localStorage.setItem('userLanguagePreference', language);\n  \n  // Also save in cookie for server-side detection (if needed)\n  document.cookie = `language=${language}; path=/; max-age=31536000`; // 1 year\n};\n\n/**\n * Clear language preference (for testing)\n */\nexport const clearLanguagePreference = (): void => {\n  localStorage.removeItem('userLanguagePreference');\n  document.cookie = 'language=; path=/; max-age=0';\n};\n\n/**\n * Get language from URL path\n */\nexport const getLanguageFromPath = (pathname: string): 'en' | 'de' | null => {\n  if (pathname.startsWith('/de')) {\n    return 'de';\n  }\n  if (pathname === '/' || !pathname.startsWith('/de')) {\n    return 'en';\n  }\n  return null;\n};\n\n/**\n * Check if user should be redirected to German version\n * This happens only on first visit (no saved preference)\n */\nexport const shouldRedirectToGerman = (currentPath: string): boolean => {\n  // Don't redirect if user already has a saved preference\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage) {\n    return false;\n  }\n\n  // Don't redirect if already on German page\n  if (currentPath.startsWith('/de')) {\n    return false;\n  }\n\n  // Check if browser language is German\n  const browserLanguage = navigator.language || (navigator as any).userLanguage;\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    return lang.startsWith('de');\n  }\n\n  return false;\n};\n\n"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAA,kBAAkB,CAAGA,CAAA,GAAmB,CACnD;AACA,KAAM,CAAAC,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,wBAAwB,CAAC,CACpE,GAAIF,aAAa,GAAK,IAAI,EAAIA,aAAa,GAAK,IAAI,CAAE,CACpD,MAAO,CAAAA,aAAa,CACtB,CAEA;AACA,KAAM,CAAAG,eAAe,CAAGC,SAAS,CAACC,QAAQ,EAAKD,SAAS,CAASE,YAAY,CAE7E;AACA,GAAIH,eAAe,CAAE,CACnB,KAAM,CAAAI,IAAI,CAAGJ,eAAe,CAACK,WAAW,CAAC,CAAC,CAC1C;AACA,GAAID,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC,CAAE,CACzB,MAAO,IAAI,CACb,CACF,CAEA;AACA,MAAO,IAAI,CACb,CAAC,CAED;AACA;AACA,GACA,MAAO,MAAM,CAAAC,sBAAsB,CAAIL,QAAqB,EAAW,CACrEJ,YAAY,CAACU,OAAO,CAAC,wBAAwB,CAAEN,QAAQ,CAAC,CAExD;AACAO,QAAQ,CAACC,MAAM,aAAAC,MAAA,CAAeT,QAAQ,8BAA4B,CAAE;AACtE,CAAC,CAED;AACA;AACA,GACA,MAAO,MAAM,CAAAU,uBAAuB,CAAGA,CAAA,GAAY,CACjDd,YAAY,CAACe,UAAU,CAAC,wBAAwB,CAAC,CACjDJ,QAAQ,CAACC,MAAM,CAAG,8BAA8B,CAClD,CAAC,CAED;AACA;AACA,GACA,MAAO,MAAM,CAAAI,mBAAmB,CAAIC,QAAgB,EAAyB,CAC3E,GAAIA,QAAQ,CAACT,UAAU,CAAC,KAAK,CAAC,CAAE,CAC9B,MAAO,IAAI,CACb,CACA,GAAIS,QAAQ,GAAK,GAAG,EAAI,CAACA,QAAQ,CAACT,UAAU,CAAC,KAAK,CAAC,CAAE,CACnD,MAAO,IAAI,CACb,CACA,MAAO,KAAI,CACb,CAAC,CAED;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAU,sBAAsB,CAAIC,WAAmB,EAAc,CACtE;AACA,KAAM,CAAApB,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,wBAAwB,CAAC,CACpE,GAAIF,aAAa,CAAE,CACjB,MAAO,MAAK,CACd,CAEA;AACA,GAAIoB,WAAW,CAACX,UAAU,CAAC,KAAK,CAAC,CAAE,CACjC,MAAO,MAAK,CACd,CAEA;AACA,KAAM,CAAAN,eAAe,CAAGC,SAAS,CAACC,QAAQ,EAAKD,SAAS,CAASE,YAAY,CAC7E,GAAIH,eAAe,CAAE,CACnB,KAAM,CAAAI,IAAI,CAAGJ,eAAe,CAACK,WAAW,CAAC,CAAC,CAC1C,MAAO,CAAAD,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC,CAC9B,CAEA,MAAO,MAAK,CACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}