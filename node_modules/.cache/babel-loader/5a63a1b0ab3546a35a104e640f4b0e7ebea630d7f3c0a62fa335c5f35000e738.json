{"ast":null,"code":"// Geo-location utility for automatic language detection\nexport const detectUserLanguage = async () => {\n  try {\n    // First check if user has already made a language choice\n    const savedLanguage = localStorage.getItem('user-language-preference');\n    if (savedLanguage) {\n      return savedLanguage;\n    }\n\n    // Check if user has cookie consent (if they've been here before)\n    const hasCookieConsent = localStorage.getItem('cookie-consent');\n    if (hasCookieConsent) {\n      // User has been here before, don't auto-redirect\n      return 'en';\n    }\n\n    // Get user's country from IP\n    const response = await fetch('https://ipapi.co/json/');\n    const data = await response.json();\n\n    // German-speaking countries\n    const germanSpeakingCountries = ['DE',\n    // Germany\n    'AT',\n    // Austria\n    'CH',\n    // Switzerland\n    'LI',\n    // Liechtenstein\n    'LU',\n    // Luxembourg\n    'BE' // Belgium (has German speakers)\n    ];\n    if (germanSpeakingCountries.includes(data.country_code)) {\n      return 'de';\n    }\n    return 'en';\n  } catch (error) {\n    console.log('Could not detect location, defaulting to English');\n    return 'en';\n  }\n};\nexport const redirectToLanguage = language => {\n  if (language === 'de' && !window.location.pathname.startsWith('/de')) {\n    // Save preference to avoid redirecting again\n    localStorage.setItem('user-language-preference', 'de');\n    window.location.href = `/de${window.location.pathname}`;\n  } else if (language === 'en' && window.location.pathname.startsWith('/de')) {\n    // User prefers English but is on German site\n    localStorage.setItem('user-language-preference', 'en');\n    const englishPath = window.location.pathname.replace('/de', '');\n    window.location.href = englishPath || '/';\n  }\n};","map":{"version":3,"names":["detectUserLanguage","savedLanguage","localStorage","getItem","hasCookieConsent","response","fetch","data","json","germanSpeakingCountries","includes","country_code","error","console","log","redirectToLanguage","language","window","location","pathname","startsWith","setItem","href","englishPath","replace"],"sources":["/Users/biltontaheri/Documents/Development/Fynteq/src/utils/geoLocation.ts"],"sourcesContent":["// Geo-location utility for automatic language detection\nexport const detectUserLanguage = async (): Promise<string> => {\n  try {\n    // First check if user has already made a language choice\n    const savedLanguage = localStorage.getItem('user-language-preference');\n    if (savedLanguage) {\n      return savedLanguage;\n    }\n\n    // Check if user has cookie consent (if they've been here before)\n    const hasCookieConsent = localStorage.getItem('cookie-consent');\n    if (hasCookieConsent) {\n      // User has been here before, don't auto-redirect\n      return 'en';\n    }\n\n    // Get user's country from IP\n    const response = await fetch('https://ipapi.co/json/');\n    const data = await response.json();\n    \n    // German-speaking countries\n    const germanSpeakingCountries = [\n      'DE', // Germany\n      'AT', // Austria\n      'CH', // Switzerland\n      'LI', // Liechtenstein\n      'LU', // Luxembourg\n      'BE'  // Belgium (has German speakers)\n    ];\n\n    if (germanSpeakingCountries.includes(data.country_code)) {\n      return 'de';\n    }\n\n    return 'en';\n  } catch (error) {\n    console.log('Could not detect location, defaulting to English');\n    return 'en';\n  }\n};\n\nexport const redirectToLanguage = (language: string) => {\n  if (language === 'de' && !window.location.pathname.startsWith('/de')) {\n    // Save preference to avoid redirecting again\n    localStorage.setItem('user-language-preference', 'de');\n    window.location.href = `/de${window.location.pathname}`;\n  } else if (language === 'en' && window.location.pathname.startsWith('/de')) {\n    // User prefers English but is on German site\n    localStorage.setItem('user-language-preference', 'en');\n    const englishPath = window.location.pathname.replace('/de', '');\n    window.location.href = englishPath || '/';\n  }\n};\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,kBAAkB,GAAG,MAAAA,CAAA,KAA6B;EAC7D,IAAI;IACF;IACA,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,0BAA0B,CAAC;IACtE,IAAIF,aAAa,EAAE;MACjB,OAAOA,aAAa;IACtB;;IAEA;IACA,MAAMG,gBAAgB,GAAGF,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;IAC/D,IAAIC,gBAAgB,EAAE;MACpB;MACA,OAAO,IAAI;IACb;;IAEA;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,wBAAwB,CAAC;IACtD,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;IAElC;IACA,MAAMC,uBAAuB,GAAG,CAC9B,IAAI;IAAE;IACN,IAAI;IAAE;IACN,IAAI;IAAE;IACN,IAAI;IAAE;IACN,IAAI;IAAE;IACN,IAAI,CAAE;IAAA,CACP;IAED,IAAIA,uBAAuB,CAACC,QAAQ,CAACH,IAAI,CAACI,YAAY,CAAC,EAAE;MACvD,OAAO,IAAI;IACb;IAEA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;IAC/D,OAAO,IAAI;EACb;AACF,CAAC;AAED,OAAO,MAAMC,kBAAkB,GAAIC,QAAgB,IAAK;EACtD,IAAIA,QAAQ,KAAK,IAAI,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,UAAU,CAAC,KAAK,CAAC,EAAE;IACpE;IACAlB,YAAY,CAACmB,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC;IACtDJ,MAAM,CAACC,QAAQ,CAACI,IAAI,GAAG,MAAML,MAAM,CAACC,QAAQ,CAACC,QAAQ,EAAE;EACzD,CAAC,MAAM,IAAIH,QAAQ,KAAK,IAAI,IAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,UAAU,CAAC,KAAK,CAAC,EAAE;IAC1E;IACAlB,YAAY,CAACmB,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC;IACtD,MAAME,WAAW,GAAGN,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IAC/DP,MAAM,CAACC,QAAQ,CAACI,IAAI,GAAGC,WAAW,IAAI,GAAG;EAC3C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}