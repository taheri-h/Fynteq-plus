{"ast":null,"code":"// Geo-location utility for automatic language detection\nexport const detectUserLanguage=async()=>{try{// First check if user has already made a language choice\nconst savedLanguage=localStorage.getItem('user-language-preference');if(savedLanguage){return savedLanguage;}// Check if user has cookie consent (if they've been here before)\nconst hasCookieConsent=localStorage.getItem('cookie-consent');if(hasCookieConsent){// User has been here before, don't auto-redirect\nreturn'en';}// Get user's country from IP\nconst response=await fetch('https://ipapi.co/json/');const data=await response.json();// German-speaking countries\nconst germanSpeakingCountries=['DE',// Germany\n'AT',// Austria\n'CH',// Switzerland\n'LI',// Liechtenstein\n'LU',// Luxembourg\n'BE'// Belgium (has German speakers)\n];if(germanSpeakingCountries.includes(data.country_code)){return'de';}return'en';}catch(error){console.log('Could not detect location, defaulting to English');return'en';}};export const redirectToLanguage=language=>{if(language==='de'&&!window.location.pathname.startsWith('/de')){// Save preference to avoid redirecting again\nlocalStorage.setItem('user-language-preference','de');window.location.href=\"/de\".concat(window.location.pathname);}else if(language==='en'&&window.location.pathname.startsWith('/de')){// User prefers English but is on German site\nlocalStorage.setItem('user-language-preference','en');const englishPath=window.location.pathname.replace('/de','');window.location.href=englishPath||'/';}};","map":{"version":3,"names":["detectUserLanguage","savedLanguage","localStorage","getItem","hasCookieConsent","response","fetch","data","json","germanSpeakingCountries","includes","country_code","error","console","log","redirectToLanguage","language","window","location","pathname","startsWith","setItem","href","concat","englishPath","replace"],"sources":["/Users/biltontaheri/Documents/Development/Fynteq/src/utils/geoLocation.ts"],"sourcesContent":["// Geo-location utility for automatic language detection\nexport const detectUserLanguage = async (): Promise<string> => {\n  try {\n    // First check if user has already made a language choice\n    const savedLanguage = localStorage.getItem('user-language-preference');\n    if (savedLanguage) {\n      return savedLanguage;\n    }\n\n    // Check if user has cookie consent (if they've been here before)\n    const hasCookieConsent = localStorage.getItem('cookie-consent');\n    if (hasCookieConsent) {\n      // User has been here before, don't auto-redirect\n      return 'en';\n    }\n\n    // Get user's country from IP\n    const response = await fetch('https://ipapi.co/json/');\n    const data = await response.json();\n    \n    // German-speaking countries\n    const germanSpeakingCountries = [\n      'DE', // Germany\n      'AT', // Austria\n      'CH', // Switzerland\n      'LI', // Liechtenstein\n      'LU', // Luxembourg\n      'BE'  // Belgium (has German speakers)\n    ];\n\n    if (germanSpeakingCountries.includes(data.country_code)) {\n      return 'de';\n    }\n\n    return 'en';\n  } catch (error) {\n    console.log('Could not detect location, defaulting to English');\n    return 'en';\n  }\n};\n\nexport const redirectToLanguage = (language: string) => {\n  if (language === 'de' && !window.location.pathname.startsWith('/de')) {\n    // Save preference to avoid redirecting again\n    localStorage.setItem('user-language-preference', 'de');\n    window.location.href = `/de${window.location.pathname}`;\n  } else if (language === 'en' && window.location.pathname.startsWith('/de')) {\n    // User prefers English but is on German site\n    localStorage.setItem('user-language-preference', 'en');\n    const englishPath = window.location.pathname.replace('/de', '');\n    window.location.href = englishPath || '/';\n  }\n};\n"],"mappings":"AAAA;AACA,MAAO,MAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAA6B,CAC7D,GAAI,CACF;AACA,KAAM,CAAAC,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,0BAA0B,CAAC,CACtE,GAAIF,aAAa,CAAE,CACjB,MAAO,CAAAA,aAAa,CACtB,CAEA;AACA,KAAM,CAAAG,gBAAgB,CAAGF,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CAC/D,GAAIC,gBAAgB,CAAE,CACpB;AACA,MAAO,IAAI,CACb,CAEA;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CACtD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAElC;AACA,KAAM,CAAAC,uBAAuB,CAAG,CAC9B,IAAI,CAAE;AACN,IAAI,CAAE;AACN,IAAI,CAAE;AACN,IAAI,CAAE;AACN,IAAI,CAAE;AACN,IAAM;AAAA,CACP,CAED,GAAIA,uBAAuB,CAACC,QAAQ,CAACH,IAAI,CAACI,YAAY,CAAC,CAAE,CACvD,MAAO,IAAI,CACb,CAEA,MAAO,IAAI,CACb,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC,CAC/D,MAAO,IAAI,CACb,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,kBAAkB,CAAIC,QAAgB,EAAK,CACtD,GAAIA,QAAQ,GAAK,IAAI,EAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,UAAU,CAAC,KAAK,CAAC,CAAE,CACpE;AACAlB,YAAY,CAACmB,OAAO,CAAC,0BAA0B,CAAE,IAAI,CAAC,CACtDJ,MAAM,CAACC,QAAQ,CAACI,IAAI,OAAAC,MAAA,CAASN,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAE,CACzD,CAAC,IAAM,IAAIH,QAAQ,GAAK,IAAI,EAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,UAAU,CAAC,KAAK,CAAC,CAAE,CAC1E;AACAlB,YAAY,CAACmB,OAAO,CAAC,0BAA0B,CAAE,IAAI,CAAC,CACtD,KAAM,CAAAG,WAAW,CAAGP,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACM,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAC/DR,MAAM,CAACC,QAAQ,CAACI,IAAI,CAAGE,WAAW,EAAI,GAAG,CAC3C,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}