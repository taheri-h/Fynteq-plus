{"ast":null,"code":"// Language detection and preference management\n\n/**\n * Get user's preferred language based on priority:\n * 1. User's manual selection (from localStorage)\n * 2. Browser's language setting\n * 3. Default to English\n */\nexport const detectUserLanguage = () => {\n  // Check if user has manually selected a language\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage === 'en' || savedLanguage === 'de') {\n    return savedLanguage;\n  }\n\n  // Check browser language\n  const browserLanguage = navigator.language || navigator.userLanguage;\n\n  // Check if browser language is German\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    // Check for German language codes (de, de-DE, de-AT, de-CH, etc.)\n    if (lang.startsWith('de')) {\n      return 'de';\n    }\n  }\n\n  // Default to English\n  return 'en';\n};\n\n/**\n * Save user's language preference\n */\nexport const saveLanguagePreference = language => {\n  localStorage.setItem('userLanguagePreference', language);\n\n  // Also save in cookie for server-side detection (if needed)\n  document.cookie = `language=${language}; path=/; max-age=31536000`; // 1 year\n};\n\n/**\n * Clear language preference (for testing)\n */\nexport const clearLanguagePreference = () => {\n  localStorage.removeItem('userLanguagePreference');\n  document.cookie = 'language=; path=/; max-age=0';\n};\n\n/**\n * Get language from URL path\n */\nexport const getLanguageFromPath = pathname => {\n  if (pathname.startsWith('/de')) {\n    return 'de';\n  }\n  if (pathname === '/' || !pathname.startsWith('/de')) {\n    return 'en';\n  }\n  return null;\n};\n\n/**\n * Check if user should be redirected to German version\n * This happens only on first visit (no saved preference)\n */\nexport const shouldRedirectToGerman = currentPath => {\n  // Don't redirect if user already has a saved preference\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage) {\n    return false;\n  }\n\n  // Don't redirect if already on German page\n  if (currentPath.startsWith('/de')) {\n    return false;\n  }\n\n  // Check if browser language is German\n  const browserLanguage = navigator.language || navigator.userLanguage;\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    return lang.startsWith('de');\n  }\n  return false;\n};","map":{"version":3,"names":["detectUserLanguage","savedLanguage","localStorage","getItem","browserLanguage","navigator","language","userLanguage","lang","toLowerCase","startsWith","saveLanguagePreference","setItem","document","cookie","clearLanguagePreference","removeItem","getLanguageFromPath","pathname","shouldRedirectToGerman","currentPath"],"sources":["/Users/biltontaheri/Documents/Development/Fynteq/src/utils/languageDetection.ts"],"sourcesContent":["// Language detection and preference management\n\n/**\n * Get user's preferred language based on priority:\n * 1. User's manual selection (from localStorage)\n * 2. Browser's language setting\n * 3. Default to English\n */\nexport const detectUserLanguage = (): 'en' | 'de' => {\n  // Check if user has manually selected a language\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage === 'en' || savedLanguage === 'de') {\n    return savedLanguage;\n  }\n\n  // Check browser language\n  const browserLanguage = navigator.language || (navigator as any).userLanguage;\n  \n  // Check if browser language is German\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    // Check for German language codes (de, de-DE, de-AT, de-CH, etc.)\n    if (lang.startsWith('de')) {\n      return 'de';\n    }\n  }\n\n  // Default to English\n  return 'en';\n};\n\n/**\n * Save user's language preference\n */\nexport const saveLanguagePreference = (language: 'en' | 'de'): void => {\n  localStorage.setItem('userLanguagePreference', language);\n  \n  // Also save in cookie for server-side detection (if needed)\n  document.cookie = `language=${language}; path=/; max-age=31536000`; // 1 year\n};\n\n/**\n * Clear language preference (for testing)\n */\nexport const clearLanguagePreference = (): void => {\n  localStorage.removeItem('userLanguagePreference');\n  document.cookie = 'language=; path=/; max-age=0';\n};\n\n/**\n * Get language from URL path\n */\nexport const getLanguageFromPath = (pathname: string): 'en' | 'de' | null => {\n  if (pathname.startsWith('/de')) {\n    return 'de';\n  }\n  if (pathname === '/' || !pathname.startsWith('/de')) {\n    return 'en';\n  }\n  return null;\n};\n\n/**\n * Check if user should be redirected to German version\n * This happens only on first visit (no saved preference)\n */\nexport const shouldRedirectToGerman = (currentPath: string): boolean => {\n  // Don't redirect if user already has a saved preference\n  const savedLanguage = localStorage.getItem('userLanguagePreference');\n  if (savedLanguage) {\n    return false;\n  }\n\n  // Don't redirect if already on German page\n  if (currentPath.startsWith('/de')) {\n    return false;\n  }\n\n  // Check if browser language is German\n  const browserLanguage = navigator.language || (navigator as any).userLanguage;\n  if (browserLanguage) {\n    const lang = browserLanguage.toLowerCase();\n    return lang.startsWith('de');\n  }\n\n  return false;\n};\n\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,kBAAkB,GAAGA,CAAA,KAAmB;EACnD;EACA,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,wBAAwB,CAAC;EACpE,IAAIF,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,IAAI,EAAE;IACpD,OAAOA,aAAa;EACtB;;EAEA;EACA,MAAMG,eAAe,GAAGC,SAAS,CAACC,QAAQ,IAAKD,SAAS,CAASE,YAAY;;EAE7E;EACA,IAAIH,eAAe,EAAE;IACnB,MAAMI,IAAI,GAAGJ,eAAe,CAACK,WAAW,CAAC,CAAC;IAC1C;IACA,IAAID,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC,EAAE;MACzB,OAAO,IAAI;IACb;EACF;;EAEA;EACA,OAAO,IAAI;AACb,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAIL,QAAqB,IAAW;EACrEJ,YAAY,CAACU,OAAO,CAAC,wBAAwB,EAAEN,QAAQ,CAAC;;EAExD;EACAO,QAAQ,CAACC,MAAM,GAAG,YAAYR,QAAQ,4BAA4B,CAAC,CAAC;AACtE,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMS,uBAAuB,GAAGA,CAAA,KAAY;EACjDb,YAAY,CAACc,UAAU,CAAC,wBAAwB,CAAC;EACjDH,QAAQ,CAACC,MAAM,GAAG,8BAA8B;AAClD,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMG,mBAAmB,GAAIC,QAAgB,IAAyB;EAC3E,IAAIA,QAAQ,CAACR,UAAU,CAAC,KAAK,CAAC,EAAE;IAC9B,OAAO,IAAI;EACb;EACA,IAAIQ,QAAQ,KAAK,GAAG,IAAI,CAACA,QAAQ,CAACR,UAAU,CAAC,KAAK,CAAC,EAAE;IACnD,OAAO,IAAI;EACb;EACA,OAAO,IAAI;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMS,sBAAsB,GAAIC,WAAmB,IAAc;EACtE;EACA,MAAMnB,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,wBAAwB,CAAC;EACpE,IAAIF,aAAa,EAAE;IACjB,OAAO,KAAK;EACd;;EAEA;EACA,IAAImB,WAAW,CAACV,UAAU,CAAC,KAAK,CAAC,EAAE;IACjC,OAAO,KAAK;EACd;;EAEA;EACA,MAAMN,eAAe,GAAGC,SAAS,CAACC,QAAQ,IAAKD,SAAS,CAASE,YAAY;EAC7E,IAAIH,eAAe,EAAE;IACnB,MAAMI,IAAI,GAAGJ,eAAe,CAACK,WAAW,CAAC,CAAC;IAC1C,OAAOD,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC;EAC9B;EAEA,OAAO,KAAK;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}